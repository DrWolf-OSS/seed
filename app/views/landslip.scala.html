@(landslip: Landslip, sensorForm: Form[Sensor])
@import helper._

@main("Franes", landslip.name, landslip.description) {

<div class="span10 offset1">



  <div class="span10 offset1">
    <table class="table table-bordered table-bordered  table-striped">
      <thead>
        <tr>
          <th>nome sensore</th>
          <th>azioni</th>
        </tr>
      </thead>
      <tbody>
        @for(sensor<- landslip.sensors){
        <tr>
          <td><a href="@routes.SensorController.view(sensor.id)">@sensor.name</a></td>
          <td>
            @form(routes.SensorController.delete(sensor.id, landslip.id)) {
            <button type="submit" class="btn btn-default">Elimina</button>
            }
          </td>
          }
        </tr>


        <tr>
          @form(routes.SensorController.newSensor(landslip.id)){
          <td>@inputText(sensorForm("name"), '_label -> "")</td>
          <td><input type="submit" value="Crea nuovo sensore" class="btn btn-default"></td>
          }
        </tr>
      </tbody>
    </table>

    <button class="btn btn-default" data-toggle="modal" data-target="#graphModal">
      Visualizza il grafico
    </button>



  <div class="modal fade" id="graphModal">
    <div class="modal-dialog">
      <div class="modal-content" id="modalContent">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title"></h4><!-- necessary for vertical spacing-->
        </div>
        <div class="modal-body" id="modalbody">
          <div id="container"> </div>
          <canvas id="myCanvas"></canvas>
          <script src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
          <script src="@routes.Assets.at("javascripts/TrackballControls.js")" type="text/javascript"></script>
          <script src="@routes.Assets.at("javascripts/graph.js")"></script>
          <script src="@routes.Assets.at("javascripts/bootstrap-slider.js")" type="text/javascript"></script>
          <script src="@routes.Assets.at("javascripts/tween.js")" type="text/javascript"></script>
          <script>

            var positions = new Array();
            var i = 0;
            var time = 0;

            @for(sensor<- landslip.sensors){
              positions[i] = new Array();
              @for(position<- sensor.positions){
                time = @position.t;
                positions[i][time] = new Array(3);
                positions[i][time][0] = @position.x;
                positions[i][time][1] = @position.y;
                positions[i][time][2] = @position.z;
              }
              i++;
            }
            init(positions);
          </script>


        </div>
        <div class="modal-footer">



          <script>
            if (top.location != location) {
              top.location.href = document.location.href ;
            }
            $(function(){

              $('#sl1').slider({
                formater: function(value) {
                  return 'Rilevazione: '+value;
                },
                min: 1,
                orientation: 'horizontal',
                value:1
              });
            });
          </script>
          <span class="leftAlign">
            Tempo:&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="text" class="slider" value="4" id="sl1" >
          </span>








          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

  }



